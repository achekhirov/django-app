{% extends 'main/base.html' %}
{% load static %}


{% block content %}
<div class="todo-container">
    <h1>To‑Do List</h1>


    <!-- Форма добавления задачи -->
    <form method="post" class="add-task-form">
        {% csrf_token %}
        <input type="hidden" name="action" value="add">
        <input type="text" name="title" placeholder="Enter a new task..." required>
        <button type="submit">Add Task</button>
    </form>

    <!-- Список задач -->
    {% if tasks %}
    <ul class="task-list">
        {% for task in tasks %}
        <li class="task-item {% if task.is_completed %}completed{% endif %}">
            <!-- Чекбокс для отметки выполнения -->
            <form method="post" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="action" value="toggle">
                <input type="hidden" name="task_id" value="{{ task.id }}">
                <input type="checkbox" onchange="this.form.submit()" {% if task.is_completed %}checked{% endif %}>
            </form>

            <span class="task-title">{{ task.title }}</span>


            <!-- Кнопка удаления -->
            <form method="post" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="action" value="delete">
                <input type="hidden" name="task_id" value="{{ task.id }}">
                <button type="submit" class="delete-btn">[×]</button>
            </form>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p class="no-tasks">No tasks yet. Add your first task above!</p>
    {% endif %}
</div>
{% endblock %}
